{% extends "new_detail.html" %}

{% block content %}



    <div id="line"
         style="width: 600px;height:350px; float:left; margin-left: 30px; margin-top: 40px; padding-left:20px "></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例

        var myChart = echarts.init(document.getElementById('line'));
        // 指定图表的配置项和数据
        var option = {
            title: {
                text: 'Instrument \n{{ selected_ins }}',
                padding: [0, 50, 50, 50],
            },
            tooltip: {


                {#trigger: 'axis',#}
                {#axisPointer: {#}
                {#  type: 'shadow',#}

            },
            toolbox: {
                feature: {
                    {#dataView: {show: true, readOnly: false},#}
                    restore: {show: true},
                    saveAsImage: {show: true},
                    formatter: function (value, index) {
                        if (value === 1) {
                            var text = "running"
                        }
                        else if (value === 0) {
                            var text = "finish"
                        }
                        return text
                    }
                }
            },
            legend: {
                data: ['running status']
            },
            dataZoom: [
                {   // 这个dataZoom组件，默认控制x轴。
                    type: 'slider', // 这个 dataZoom 组件是 slider 型 dataZoom 组件
                    start: 0,      // 左边在 10% 的位置。
                    end: 100         // 右边在 60% 的位置。
                }
            ],
            xAxis: {
                type: 'time',
                boundaryGap: false,
                axisPointer: {
                    show: true
                },

                min: {{ start_time }},
                max: {{ end_time }},
                dateTimeLabelFormats: {
                    day: '00:00',
                    hour: '%H:00',
                },
                splitNumber: 10,
                {#minInterval: 3600*1000,#}

                labels: {
                    rotation: 45,
                    step: 2
                }
            },
            yAxis: [{
                type: 'value',
                axisLabel: {
                    show: true,
                    formatter: function (value, index) {
                        if (value === 1) {
                            var text = "running"
                        }
                        return text
                    }
                }
            }
            ],
            series: [{
                name: 'running status',
                type: 'line',
                step: 'end',
                data: {{ ins_data['data'] }},
                areaStyle: {}

            }]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option, true);


    </script>

    <div id="pie" style="width: 350px;height:300px; float: left; margin-top:60px; "></div>
    <script>
        // 绘制图表。
        echarts.init(document.getElementById('pie')).setOption({
            series: {
                type: 'pie',
                data: [
                    {name: 'Running Ratio', value: {{ins_data['ratio']}}},
                    {name: 'Rest Ratio', value: {{ins_data['rest_ratio']}}},
                    {#{name: 'C', value: 1919}#}
                ],
                label: {
                    show: true,
                    normal: {
                        show: true,
                        formatter: '{b}:\n ({d}%)'
                    }
                }


            }
        });
    </script>

{% endblock %}